extends layout

block content
  
  h1(class= "titletext") Welcome to the Baylor Weather App 
  // Get the most recent data and sort the array with most
  // recent data first
  - var today = current[0]
  - results.sort(function(a,b){
  -   return a.time < b.time
  - })
  body
    -var time;
    if today.time.getHours() > 12
      -time = today.time.getHours() - 12;
      -time = time + ":" + today.time.getMinutes() + "P.M."
    else
      -var time = today.time.getHours() + ":" +today.time.getMinutes() + "A.M.";
    div(class= "navbar")
      p(class= "navTitle") Today: #{today.time.getMonth()}/#{today.time.getDate()}/#{today.time.getFullYear()} #{time} 
      table(class= "navTable")
        tr(class= "navRow")
          td(class= "navData") Temperature: #{today.temperature}&deg;F 
          td(class= "navData") Wind Speed: #{today.windSpeed}mph
          td(class= "navData") Pressure: #{today.pressure}psi
    a(href= '/archive') The Archive    
    p A daily history of the weather data collected.
    h2(class= "today") Today's Data:
    for data in results
      if data.time.getHours() > 12
        -time = data.time.getHours() - 12;
        -time = time + ":" + data.time.getMinutes() + "P.M."
      else
        -var time = data.time.getHours() + ":" +data.time.getMinutes() + "A.M.";
      if data.temperature >= 65
        <div class="sunny">
          <div class="weathertext">
            h1(class= text) 
            p #{time}<br />#{data.temperature}&deg;F<br />#{data.windSpeed} Mph<br />#{data.pressure} psi
          </div>
        </div>

      else if data.temperature >= 32
        <div class="chilly">
          <div class="weathertext">
            h1(class= text) 
            p #{time}<br />#{data.temperature}&deg;F<br />#{data.windSpeed} Mph<br />#{data.pressure} psi
          </div>
        </div>


      else if data.temperature <= 32
        <div class="freezing">
          <div class="weathertext">
            h1(class= text) 
            p #{time}<br />#{data.temperature}&deg;F<br />#{data.windSpeed} Mph<br />#{data.pressure} psi
          </div>
        </div>

  
  
